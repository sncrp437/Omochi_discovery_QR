<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Discover the venue you're at - NFC Experience">
    <title>Discover Venue - Omochi</title>
    <link rel="stylesheet" href="css/nfc-styles.css">
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"></script>
</head>
<body>
    <!-- Language Toggle - Top Right Corner -->
    <div class="language-toggle" id="languageToggle">
        <button class="lang-btn" data-lang="en">EN</button>
        <span class="lang-divider">|</span>
        <button class="lang-btn active" data-lang="ja">æ—¥æœ¬èª</button>
    </div>

    <!-- Omochi Save to Home Screen Modal -->
    <div class="omochi-modal" id="omochiModal">
        <div class="omochi-modal-overlay" id="omochiModalOverlay"></div>
        <div class="omochi-modal-content">
            <button class="omochi-modal-close" id="omochiModalClose">&times;</button>

            <!-- Visual Illustration -->
            <div class="modal-illustration">
                <span class="illustration-icon">ğŸ“±</span>
                <span class="illustration-badge">+</span>
            </div>

            <h2 id="omochiModalTitle">ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ </h2>
            <p id="omochiModalMessage" class="modal-description">Copy A - main description placeholder</p>

            <!-- Benefits List -->
            <div class="modal-benefits">
                <div class="benefit-item">
                    <span class="benefit-icon">âš¡</span>
                    <span class="benefit-text" id="benefitA">Copy A - first benefit placeholder</span>
                </div>
                <div class="benefit-item">
                    <span class="benefit-icon">ğŸ“</span>
                    <span class="benefit-text" id="benefitB">Copy B - second benefit placeholder</span>
                </div>
                <div class="benefit-item">
                    <span class="benefit-icon">ğŸ’¾</span>
                    <span class="benefit-text" id="benefitC">Copy C - third benefit placeholder</span>
                </div>
            </div>

            <!-- Platform Instructions -->
            <div class="platform-instructions">
                <div class="instruction-ios" id="instructionIOS">
                    <p><strong id="omochiIOSStep1">1. å…±æœ‰ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¿ãƒƒãƒ—</strong> <span class="ios-share-icon">â‹</span></p>
                    <p><strong id="omochiIOSStep2">2.ã€Œãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã€ã‚’ã‚¿ãƒƒãƒ—</strong></p>
                </div>
                <div class="instruction-android" id="instructionAndroid">
                    <p><strong id="omochiAndroidStep1">1. ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¿ãƒƒãƒ—</strong> <span class="android-menu-icon">â‹®</span></p>
                    <p><strong id="omochiAndroidStep2">2.ã€Œãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã€ã‚’ã‚¿ãƒƒãƒ—</strong></p>
                </div>
            </div>

            <button class="omochi-continue-btn" id="omochiContinueBtn">ã“ã®ãŠåº—ã‚’é›†ã‚ã‚‹ï¼</button>
        </div>
    </div>

    <!-- Store Choice Modal (appears before venue grid) -->
    <div class="store-choice-modal" id="storeChoiceModal">
        <div class="store-choice-modal-overlay" id="storeChoiceModalOverlay"></div>
        <div class="store-choice-modal-content">
            <h2 id="storeChoiceTitle">Choose Your Store</h2>
            <p id="storeChoiceSubtitle">Select how you'd like to find your venue</p>
            <button id="browseStoresBtn" class="store-choice-btn primary">
                ğŸª Browse Stores
            </button>
            <button id="scanQRBtn" class="store-choice-btn secondary">
                ğŸ“· Scan QR Code
            </button>
        </div>
    </div>

    <!-- Landing Screen (initial state) -->
    <div id="landingScreen" class="screen active">
        <div class="nfc-branding">
            <img src="assets/nfc-icon.svg" alt="Discover" class="nfc-logo">
            <h1>Discover the venue you're at</h1>
            <p class="tagline">Tap. Discover. Collect.</p>
        </div>

        <div class="how-it-works">
            <h2>How it works</h2>
            <div class="steps">
                <div class="step">
                    <span class="step-number">1</span>
                    <p>Allow location access</p>
                </div>
                <div class="step">
                    <span class="step-number">2</span>
                    <p>We'll find the venue you're at</p>
                </div>
                <div class="step">
                    <span class="step-number">3</span>
                    <p>Collect it to your Omochi</p>
                </div>
            </div>
        </div>

        <button id="findVenueBtn" class="cta-button">
            Find Venue Near Me
        </button>

        <div class="why-omochi">
            <h3>Why collect to Omochi?</h3>
            <p>Build your personal collection of places that matter.
               Return to favorites, discover new venues, and never forget
               a great meal.</p>
        </div>
    </div>

    <!-- Loading Screen (GPS detection in progress) -->
    <div id="loadingScreen" class="screen">
        <div class="loading-spinner"></div>
        <p>Finding venue near you...</p>
        <p class="loading-status"></p>
    </div>

    <!-- Venue Display Screen (GPS success) -->
    <div id="venueScreen" class="screen">
        <!-- Single venue will be dynamically injected here -->
    </div>

    <!-- QR Scanner Screen (GPS fallback) - DOM created dynamically -->
    <div id="qrScannerScreen" class="screen"></div>

    <!-- No Venue Screen (GPS failed - no venue within 100m) -->
    <div id="noVenueScreen" class="screen">
        <h2>No venue nearby</h2>
        <p>We couldn't find a partnered venue within 100m of your location.</p>
        <button id="tryQRBtn">Scan QR Code Instead</button>
        <button id="backBtn">Go Back</button>
    </div>

    <!-- Floating QR Button Container - Always rendered like language toggle -->
    <div class="qr-floating-container" id="qrFloatingContainer">
        <button class="qr-scan-btn-floating" id="floatingQRBtn" onclick="showQRScanner()">
            Scan QR Code Instead
        </button>
    </div>

    <!-- Scripts -->
    <script src="js/i18n.js"></script>
    <script src="js/data.js"></script>
    <script src="js/analytics.js"></script>
    <script src="js/nfc-router.js"></script>
</body>
</html>

